\documentclass[a4paper,12pt,french]{book}

\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}

\usepackage[square]{natbib}
\usepackage{tocbibind}

\usepackage[frenchb]{babel}

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{bm}
\usepackage{xspace}
\usepackage{subcaption}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{mathrsfs}
\usepackage{multirow}
\usepackage{eurosym}

\usepackage{bibentry}
\nobibliography*

\usepackage{tikz}

% Théorèmes et Définitions
\usepackage{amsthm}

% Marges possibles pour format A4 (PDF / papier)
\usepackage[bindingoffset=0pt,width=14cm,height=22cm,marginratio=1:1,vmarginratio=1:1]{geometry}
%\usepackage[width=14cm,height=22cm]{geometry}

\usepackage{fancyhdr}
\setlength{\headheight}{15pt}

% Hyperliens et coloration éventuelle (PDF / papier)
\usepackage[colorlinks,urlcolor=magenta,linkcolor=purple,citecolor=teal]{hyperref}
%XXX For print : no link color
%\usepackage[colorlinks,urlcolor=black,linkcolor=black,citecolor=black]{hyperref}

% Pour les grosses figures se soit pas déplacer 
% à la fin des chapitre mais
% plutôt à la fin des sections
\usepackage[section]{placeins}

%
% Place les grosses figures après les subsection et les subsubsection
% Float barier
%
\makeatletter
\AtBeginDocument{%
    \expandafter\renewcommand\expandafter\subsection\expandafter{%
        \expandafter\@fb@secFB\subsection
    }%
}
\makeatother
\makeatletter
\AtBeginDocument{%
    \expandafter\renewcommand\expandafter\subsubsection\expandafter{%
        \expandafter\@fb@secFB\subsubsection
    }%
}
\makeatother

% Pas de footnote sur deux pages ...
\interfootnotelinepenalty=10000

%%%

% Permet d'épeler une formule mathématique dans un titre de chapitre/section,
% afin de ne pas rompre les hyperliens dans le PDF final.
\newcommand{\mname}{\texorpdfstring}
% ex: \chapter{Propriétés du système de réécriture \mname{$\to_\beta$}{b-red}}

% Utiliser ces commandes au lieu de chapter* ou section* pour des chapitres
% non-numérotés figurant dans la table des matières (par ex. intro/conclu).
\newcommand{\uchapter}[1]{
	\chapter*{#1}
	\addcontentsline{toc}{chapter}{#1}
	\markboth{#1}{}
}

\newcommand{\usection}[1]{
	\section*{#1}
	\addcontentsline{toc}{section}{#1}
	\markright{#1}
}

% Macro pour la transposée
\newcommand\T{\mathsf{T}}

% Environnements numérotés (théorèmes, lemmes, etc.)
\theoremstyle{plain}
\newtheorem{theorem}{Théorème}[chapter]
\newtheorem{lemma}[theorem]{Lemme}

\theoremstyle{definition}
\newtheorem{definition}{Définition}[chapter]


%% AJOUTEZ ICI VOS PROPRES COMMANDES

%%% Une commande \centerfloat pour centrer
%%% une figure sur la page sans prendre en
%%% compte les marges
%%% https://tex.stackexchange.com/questions/57702/custom-margin-settings-for-figure-in-latex
\makeatletter
\newcommand*{\centerfloat}{%
    \parindent \z@
    \leftskip \z@ \@plus 1fil \@minus \textwidth
    \rightskip\leftskip
    \parfillskip \z@skip}
\makeatother

% % Locutions étrangères et abréviations.
\newcommand{\loce}[1]{\textit{#1}}
\newcommand{\eg}{\loce{e.g.\ }}
\newcommand{\ie}{\loce{i.e.\ }}
\newcommand{\cf}{\loce{cf.\ }}
\makeatletter
\newcommand{\sdot}{\@ifnextchar.{}{.}}
\makeatother
\newcommand{\etc}{\loce{etc}\sdot}

% \newcommand{\set}[1]{\left\lbrace #1 \right\rbrace}
% ...

%%%

\input{../template/BXthesis}
% Ce fichier contient les commandes nécessaires pour produire la page de garde
% ainsi que les pages liminaires (hors remerciements). Son contenu est déterminé
% par la définition des commandes suivantes :

% École doctorale
\renewcommand{\BXed}{DE MATHÉMATIQUES ET D'INFORMATIQUE}

% Spécialité
\renewcommand{\BXspe}{INFORMATIQUE}

% Nom du candidat
\renewcommand{\BXnom}{Quentin Rouxel}

% Sujet de la thèse
\renewcommand{\BXsujet}{
Apprentissage et correction des imperfections 
des robots humanoïdes de petite taille :\\
application à l'odométrie et à la synthèse de mouvements
}

% Disrecteur de thèse
\renewcommand{\BXdirector}{
Olivier Ly et Hugo Gimbert
}

% Année de soutenance
\renewcommand{\BXannee}{2017}

% Date de la soutenance
\renewcommand{\BXdate}{04 décembre 2017}

% Composition du jury de thèse
\renewcommand{\BXexamlist}{
	\BXexam{Jacky}{Baltes}{Professeur}
            {National Taiwan Normal University}{Rapporteur}
	\BXexam{Serge}{Chaumette}{Professeur}
            {LaBRI, Univ. Bordeaux}{Président du jury}
	\BXexam{Vincent}{Hugel}{Professeur}
            {COSMER, Univ. Toulon}{Rapporteur}
	\BXexam{Vincent}{Padois}{Maître de Conférences}
            {ISIR, Univ. Paris-VI}{Examinateur}
}
%Titre: Maître de conférences, Professeur des universités, Chargé de recherche…
%Rôle: Président (du jury), Directeur, Co-directeur, Rapporteur, Examinateur…

% Contenu des pages liminaires
%Résumé en français de moins de 1.700 caractères.
\renewcommand{\BXresume}{
Les petits robots humanoïdes sont généralement soumis à de nombreuses
imperfections : déformations et jeux mécaniques, défauts électriques 
et problèmes d'asservissements moteurs.
L'objet de ces travaux est l'utilisation de techniques d'apprentissage
pour compenser les imperfections du robot réel.
L'amélioration de la précision de l'odométrie et de la stabilité 
de mouvements générés est étudiée.

Cette thèse est fortement guidée et inspirée par la participation de l'équipe
Rhoban (Rhoban Football Club) à la compétition internationale de 
robotique, la RoboCup.
Depuis 2011, l'équipe concourt chaque année dans la ligue 
des petits robots humanoïdes complètement autonomes (Humanoid Kid-Size) 
dans un tournoi de football robotique.

L'odométrie proprioceptive estime les déplacements du robot à partir de ses 
capteurs internes (la caméra n'est pas utilisée) alors que
l'odométrie prédictive simule les déplacements engendrés par une séquence donnée 
d'ordres du mouvement de marche.
Deux méthodes de correction sont ici proposées pour les deux odométries.
La première se fonde sur une technique de régression non paramétrique (LWPR)
et un système externe de capture de mouvement.
La deuxième optimise (CMA-ES) un modèle 
de correction linéaire sans nécessiter aucun autre dispositif de mesure.
L'odométrie proprioceptive est essentielle à la localisation du robot sur le terrain
de football alors que l'odométrie prédictive permet d'entraîner hors ligne
une politique de contrôle de la marche.

La synthèse de mouvements très dynamiques tels que la marche ou le tir
est rendue difficile par la forte contrainte de stabilité bipède
et les imperfections des servomoteurs.
Des mouvements de tir sont tout d'abord générés par optimisation (CMA-ES)
et évalués au travers du modèle dynamique inverse du robot.
Le développement d'un simulateur physique a été commencé.
Le but est de réduire la distance entre le comportement réel 
et le comportement désiré du robot par correction 
des mouvements au sein du simulateur.
}
%English title
\renewcommand{\BXtitle}{
Learning and correcting flaws of small humanoid robots : 
application to odometry and motion generation
}
%English abstract in less than 1.700 characters.
\renewcommand{\BXabstract}{
Small humanoid robots are often affected by many flaws : mechanical
wraps and backlashes, electrical issues and motor control problems.
This work is aimed at applying machine learning methods to deal with
the flaws of the real robot.
More precisely, improving the odometry accuracy and generated 
motion stability is studied.

This thesis is highly guided and inspired by the participation
of the Rhoban team (Rhoban Football Club) to the international
RoboCup competition.
Since 2011, the team has been competing each year in a soccer tournament within 
the fully autonomous small humanoid robots (Kid-Size) league.

Proprioceptive odometry estimates the robot displacements from
its internal sensors (no camera is used) whereas predictive odometry simulates
the displacements created from a sequence of walk orders.
Two corrective methods are proposed for the two kinds of odometries.
The first one is based on a non parametric regression (LWPR) and
a motion capture setup.
The second one optimizes (CMA-ES) a linear corrective model without needing
any external measure system.
The proprioceptive odometry is essential to the localization of the robot
on the soccer field.
The predictive odometry is used to train a control policy for the walk motion.

The generation of very dynamic motions like walking or kicking the ball
is difficult due to the biped balance constraint and the many servomotor flaws.
To start, kick motions are generated by optimization (CMA-ES) and evaluated based
on the inverse dynamic model of the robot.
The implementation of a physics simulator has been started.
The objective is to make the real behaviour of the robot to catch up the
target trajectory by correcting the motion within the simulator.
}
\renewcommand{\BXkeywords}{
robotics, humanoid robot, RoboCup, machine learning, flaw,
odometry, proprioception, motion generation, biped walk, 
kick, dynamic simulation
} 
\renewcommand{\BXmotscles}{
robotique, robot humanoïde, RoboCup, apprentissage, imperfection, 
odométrie, proprioception, synthèse de mouvement, marche bipède, 
tir, simulation dynamique
} 
\renewcommand{\BXlabo}{
Laboratoire Bordelais de Recherche en Informatique (LaBRI),
Université de Bordeaux (UMR 5800),
351 cours de la Libération,
33405 Talence, 
France
}

% Nom de l'auteur et titre, tels qu'apparaissant dans en pied de page.
\renewcommand{\BXnomcourt}{\BXnom}
\renewcommand{\BXsujetcourt}{
Apprentissage des imperfections des petits robots humanoïdes
}

\author{\BXnom}
\title{\BXsujet}
\hypersetup{pdfauthor={\BXnom}}
\hypersetup{pdftitle={\BXsujet}}

%%%

\begin{document}

%% Pages liminaires
\frontmatter

\BXcouverture

\chapter*{Remerciements}

Tout d'abord, je souhaiterais remercier les membres de mon jury.
Serge Chaumette pour avoir accepté sa présidence,
Vincent Hugel, Jacky Baltes et Vincent Padois, 
pour leur relecture attentive de ces travaux ainsi que leurs 
précieux retours et commentaires.
\newline

Je remercie mes directeurs de thèse, Olivier Ly et Hugo Gimbert
pour m'avoir fait entrer dans le monde de la recherche.
Merci également à Olivier d'avoir impulsé la création cette équipe 
de robotique Rhoban, de nous avoir réunis et de continuer à soutenir son développement.
\newline

Un grand merci à Steve N'Guyen pour sa grande expérience de la recherche 
et ces nombreux conseils très avisés.
Même s'il n'en est pas officiellement l'encadrant, 
sa présence aura fortement guidé les travaux de cette thèse.
\newline

Merci à tous les membres de l'équipe Rhoban :
Julien Allali, Rémi Fabre, Loic Gondry, Ludovic Hofer, Olivier Ly,
Steve N'Guyen, Grégoire Passault et Antoine Pirrone
pour vos grandes qualités techniques mais surtout humaines, 
dans cette grande aventure commune qu'est la RoboCup.

Pour pouvoir être réalisées, les expérimentations robotiques nécessitent
un très important effort d'ingénierie : de la conception à la fabrication mécanique
du robot lui-même, de son électronique au développement de ces nombreux composants logiciels.
Sans l'énergie de toute une équipe, les applications étudiées ici n'auraient pas pu se matérialiser.
\newline

Enfin, je remercie tout particulièrement Claire ; pour ta présence, ta patience 
et ton soutien indéfectible chaque jour durant toutes ces années.
\newline

% Profondeur de la table des matières (défaut 3)
% (0=chapitres, 1=sections, 2=sous-sections, 3=sous-sous-sections…)
%\setcounter{tocdepth}{2}
\tableofcontents

%% Contenu du document
\mainmatter

\chapter{Introduction}

\input{../src/introduction}

\chapter{Le robot Sigmaban}

\input{../src/robot}

\input{../src/modeleGeometrique}

\input{../src/ikwalk}

\chapter{État de l'art}

\input{../src/biblio_odometry}

\chapter{Odométrie proprioceptive et prédictive}

\input{../src/apprentissageOdometrie}

\input{../src/odometrie_lwpr}

\input{../src/odometrie_cmaes}

\chapter{Synthèse de mouvements et simulation}

\input{../src/modeleDynamique}

\input{../src/generationMouvements}

%\chapter{Plan ...}
%\input{../src/plan}

\chapter{Conclusion}

\input{../src/publications_works}

\input{../src/perspectives}

\appendix
\input{../src/annexes}

%% Chapitres non-numérotés (biblio, glossaire, etc.)
\backmatter

%\nocite{*}

% Les fichiers sources du style bibliographique bx sont actuellement «égarés».
% Le fichier 'bx-thesis-fr.bst' contient cependant diverses instructions
% sur l'emploi des commandes de citation (cf. lignes 28 à 55).
\bibliographystyle{../template/bx-thesis-fr}
\bibliography{../bib/publications,../bib/AHRS,../bib/odometry,../bib/walk,../bib/nonparametric,../bib/blackbox,../bib/others,../bib/dynamics,../bib/contact,../bib/motion,../bib/robocup,../bib/identification}

\end{document}

%%% Commentaires Vincent Padois %%%
%- Ch5., modèle dynamique : préciser q articulaire : il y a aussi base flottante
%def 5.1 : tau appartient pas à R^n n + 6 pour base flottante
%q dq : dérivée vitesse : prendre en compte base flottante 
%si base flottante dans q : on a pas directemeny dq pour la vitesse
%ref : voir HDR vincent Padois chapitre 1
%
%contact bilatéral ne veut pas dire pied en contact : il faut imposé existance force de contact 
%: glissement. Dire que l'on préciser plus loin
%
%Post-doc pistes: Daniele Pucci (iCub), Nikos Tsagarakis (walkman) IIT, Gênes
%https://www.amm.mw.tum.de/en/research/current-projects/humanoid-robots/
%Jerry Pratt -- Jerry Pratt, IHMC
%JRL japon -- RL, AIST-CNRS : Abder Kheddar / Eiichi Yoshida
%Katja Mombaur, Heidelberg
%Sethu Vijayakumar Edinborough
%http://www.edinburgh-robotics.org/
%Luis Sentis Austin University
%Jaehung Park Corée du Sud (Seoul National University)
%OK POUR LISTE REFERENCE
%

